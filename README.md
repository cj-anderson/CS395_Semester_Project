# CS395 Semester Project

* Version: 0.2.5
* Author: Caleb Anderson
* Languages Involved:
    * Rust

# Requirements:

* Cargo (Rust Compiler)

# Base Dependencies:

* thiserror (v2.0.12)
* serde (v1.0, includes "derive" feature)
* serde_json (v1.0)
* rand (v0.9 or latest)

# Dev Dependencies:

* hamcrest2 (v0.3 or current) 
* stringreader (v0.1.1)
* thiserror = (v2.0.12)
* eyre (v0.6.12)
* rstest (v0.25.0)
* serde (v1.0, includes "derive" feature)
* serde_json (v1.0)
* approx (v0.5)

# Objectives:

The aim of this project is to:
* Utilise Rust (and potentially FFI with Java - optional),
* Create a text-based roguelike that runs completely through the terminal, that includes:
    * Saving and loading the game, via a .json file 
    * Saving and loading from a backup save, also stored in a .json file
    * Have two (or more - optional) player "classes" for different playstyles 
        * (Current Version has one, may scrap second class idea if implementation becomes difficult)
    * Implement basic equipment, such as:
        * Weapons (Each has a name, level, hit modifier, and damage value.)
        * Armor (Each has a name, level, and defense value.)
        * Shield (Each has a name, level, and defense value.)
    * Upgrading player equipment, up to a maximum of 4 times (Max Level: 5)
    * Implement a basic consumable (Healing Potion)
        * (Potential Upgrade Idea: Add Shop Functionality to increase max carrying capacity)

# Overview:

This program is a text-based rogue-like that runs completely in the terminal. Currently, there is one playable class, 4 levels of upgrade for each piece of equipment, and a carrying capacity of 3 healing potions.

# Compilation and Initial Menu:

When compiled using 

```
cargo run
```

The following output will be provided:

```
Welcome to the Game!
Please choose an option:
1. Load from save file (player_data.json)
2. Load from backup (save_file.json)
3. Start fresh

```

In this situation, you may choose one of three options:
* Load from a save file, named player_data.json
* Load from a backup file, named save_file.json
* Start from a fresh file

These files are generated by the game through the use of the rust "serde" and "serde_json" crates.

# Main Game Menu and Options:

After making a selection, you will be taken to the main menu screen, which looks like this: 

```
What would you like to do?
1. Visit Shop
2. Rest
3. Move to Next Room
4. View Stats
5. Save and Quit

```

Each of these options have different results, which will briefly be detailed below before being fully explained in their own sections:
1. Visit Shop - Upgrade the player's weapon, armor, and shield, provided they have enough gold.
2. Rest - Recharge the player's healing potion uses to maximum.
3. Move to Next Room - Journey further into the game, encountering monsters and beginning another round of combat.
4. View Stats - Displays the player's statistics and equipment.
5. Save and Quit - Update the player's save and backup, and then exit the program.

# Visiting the Shop:

When visiting the shop, something similar to this will be displayed: 

```
Welcome to the shop!

Current Equipment:
Weapon: Strengthened Sword (Damage: 15, Hit Modifier: 2, Level: 2)
Shield: Reinforced Shield (Defense: 8, Level: 2)
Armor: Reinforced Armor (Defense: 10, Level: 2)

Gold: 35

Available Upgrades:
1. Upgrade Weapon (Cost: 65 gold)
2. Upgrade Shield (Cost: 55 gold)
3. Upgrade Armor (Cost: 60 gold)
4. Leave the shop

```

If a piece of the player's equipment is already at max level, a different message will be displayed, and further upgrades will be prohibited.

Also, if the player does not have enough gold to purchase an upgrade, a message will be displayed and the player will not lose gold.

# Resting and Recharging:

Upon choosing to rest, the player will regain all HP and uses of their healing potion. The following output will be displayed:

```
You rest and regain HP.
Your healing potions have been recharged!

Press Enter to return to the menu...

```

As explained, pressing Enter will return the player to the main menu.

# Moving Forward in the Game:

When moving to the next room, you may encounter enemies. For example:

```
You encountered:
Dragon Whelp (HP: 80/80)
Orc (HP: 50/50)
Dragon Whelp (HP: 80/80)

Your HP: 35/35
Potions left: 3
Choose an action:
1. Attack
2. Defend
3. Heal

```

Your options are as follows:
1. Attack (Choose an enemy, and use your weapon to deal damage.)
2. Defend (Raise your shield, and decrease damae for one turn.)
3. Heal (Consume one use of your healing potion, and heal for an amount equal to ((.3 + (.01 * player level)) * player's max hp).)

After you make a choice, all remaining enemies take their turns, either attacking or guarding.

If you reach 0 HP, you lose the game, and it exits the program. Your last saved data is still saved, however, so if you'd like to pick up where you left off and try again, you can!

Upon defeating all enemies, you gain EXP, gold, and could potentially level up, increasing your stats!

Once combat is concluded, the player is returned to the main menu.

# Viewing the Player's Stats:

Upon selecting this option, the player's stats will be shown. An example is given below.

```
--- Player Stats ---
Name: Caleb
Level: 4
XP: 23/33
HP: 35/35
ATK: 8 | DEF: 8
Gold: 35
Weapon: Strengthened Sword (Level 2, Hit Modifier: 2, Damage: 15)
Armor: Reinforced Armor (Level 2, Defense: 10)
Shield: Reinforced Shield (Level 2, Defense: 8)
Potion Uses: 3


Press Enter to return to the menu...

```

As displayed, pressing Enter here will return the player to the menu.

# Saving and Quitting:

Upon selecting this option, all player data will be serialized and stored in a "player_data.json" file. The player's data and the enemies' will also then be serialized and backed up into a "save_file.json" file. The program then exits.

# Conclusion and Observations:

Over the course of the semester, I made a variety of changes. For instance, one big change in the code of this project was how I implemented (or rather, removed implementation of) the Entity trait. Initially, the Player and Enemy structs were going to be based off of the Entity trait, and add custom methods and data members of their own. However, I later completely scrapped the implementation of this trait within the Player class, and it's largely unused in the Enemy class. Another change I made involved foreign function interface, or the lack thereof. I wanted to include Java initially (as I knew a lot more about Java than I did Rust when initially beginning this project. However, I later decided to complete this assignment 100% in Rust, and it helped me to learn the language instead of depending on a language i knew already. 

Given a month, I would try to find a way to add a second (or more) player class allowing for more equipment and items. I would also like to add checkpoints of some variety (i.e. specific "boss" enemies after x amount of rooms), and also encounters that don't always involve combat. I learned that relying on what I know isnt always going to work, and that sometimes other people might have ideas that benefit my project in some way.
